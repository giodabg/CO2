\chapter{Architettura e responsabilità }
\hypertarget{architecture}{}\label{architecture}\index{Architettura e responsabilità@{Architettura e responsabilità}}
\hypertarget{architecture_layers}{}\doxysection{\texorpdfstring{Layering}{Layering}}\label{architecture_layers}
Il progetto è separato in layer\+:
\begin{DoxyItemize}
\item Domain\+: definisce i modelli e la logica di interpretazione del testo OCR.
\item OCR\+: produce testo e metadati di qualità dalla foto.
\item Storage\+: persiste il contratto su SQLite.
\item API\+: espone endpoint per ingest.
\item CLI\+: entrypoint locale, utile per debug e batch.
\end{DoxyItemize}\hypertarget{architecture_dependencies}{}\doxysection{\texorpdfstring{Dipendenze (direction)}{Dipendenze (direction)}}\label{architecture_dependencies}
Dipendenze desiderate\+:
\begin{DoxyItemize}
\item api -\/\texorpdfstring{$>$}{>} (cli pipeline) -\/\texorpdfstring{$>$}{>} ocr + domain + storage
\item cli -\/\texorpdfstring{$>$}{>} ocr + domain + storage
\item domain -\/\texorpdfstring{$>$}{>} (no dipendenze verso api/storage)
\item storage -\/\texorpdfstring{$>$}{>} domain (solo modelli)
\end{DoxyItemize}\hypertarget{architecture_extensibility}{}\doxysection{\texorpdfstring{Estendibilità}{Estendibilità}}\label{architecture_extensibility}
1) Sostituire OCR engine\+: aggiungere nuovi moduli in ocr/ e mantenere firma simile a run\+\_\+tesseract(). 2) Migliorare parsing\+: estendere \doxylink{parsing_8py}{domain/parsing.\+py} con regole italiane e test di regressione. 3) UI Web\+View\+: consumare API /ingest e utilizzare contract JSON come DTO stabile. 